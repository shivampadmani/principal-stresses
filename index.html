<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=windows-1252">
    <title> Principal Stresses </title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body class="fullbody">
    <h1 id="heading"> Welcome to Principal Stress Calculator </h1>
    <table id="mainbody">
      <tbody>
        <tr>
          <td class="left"> <img src="images/main_diagram.jpg" alt="Basic Diagram"

              style="width: 391px; height: 385px;">
            <form id="user_input">
              <table>
                <tbody>
                  <tr>
                    <td> ?<sub>x</sub> </td>
                    <td> <input class="textbox" id="stress-x" type="number">
                    </td>
                  </tr>
                  <tr>
                    <td> ?<sub>y</sub> </td>
                    <td> <input id="stress-y" class="textbox" type="number"> </td>
                  </tr>
                  <tr>
                    <td> ?<sub>xy</sub> </td>
                    <td> <input id="shear" class="textbox" type="number"> </td>
                  </tr>
                </tbody>
              </table>
              &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <input

id="calculate_now" value="Calculate" onclick="calculate()" type="submit"> </form>
          </td>
          <td class="right"> <canvas id="myCanvas" height="400px" width="700px"></canvas>
            <table>
              <tbody>
                <tr>
                  <!--for drawing circle--> </tr>
                <tr>
                  <!--for showing answer--> </tr>
              </tbody>
            </table>
            <table id="answertable">
              <tbody>
                <tr>
                  <td>
                    <p> Max. Principal Stress </p>
                  </td>
                  <td> <br>
                  </td>
                </tr>
                <tr>
                  <td>
                    <p> Min. Principal Stress </p>
                  </td>
                  <td> <br>
                  </td>
                </tr>
                <tr>
                  <td>
                    <p> Max. Shear Stress </p>
                  </td>
                  <td> <br>
                  </td>
                </tr>
                <tr>
                  <td>
                    <p> Angle of Principal planes </p>
                  </td>
                  <td> <br>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
    <script>
        var mohrradius;
        var sigma1, sigma2, thetaP, thetaS, shearMax, v;
        function calculate() {
            event.preventDefault();
            var x = document.getElementById("stress-x").value;
            var y = document.getElementById("stress-y").value;
            var z = document.getElementById("shear").value;

            //all fromulas here!!!
            mohrradius = Math.sqrt(((x - y) * (x - y) / 4) + z * z);
            v = (2 * z) / (x - y);
            sigma1 = ((x + y) / 2) + mohrradius;
            sigma2 = ((x + y) / 2) - mohrradius;
            thetaP =(Math.atan(v)) / 2;
            shearMax = (sigma1 - sigma2) / 2;
            document.getElementById("pstress-1").innerHTML = sigma1 + " N/mm^2";
            document.getElementById("pstress-2").innerHTML = sigma2 + " N/mm^2";
            document.getElementById("pshearmax").innerHTML = shearMax + " N/mm^2";
            document.getElementById("pthetap").innerHTML =  radians_to_degrees(thetaP) + " degrees";
            /*document.getElementById("pstress-1").innerHTML = sigma1;
            document.getElementById("pstress-2").innerHTML = sigma2;*/
            drawcirc();
            drawline();
        }
        function drawcirc() {
            var c_circ = document.getElementById("myCanvas");
            var ctx_circ = c_circ.getContext("2d");
            var radius = radius;
            ctx_circ.beginPath();
            ctx_circ.arc((sigma1 + sigma2) / 2, 200, 100, 0, 2 * Math.PI);
            ctx_circ.stroke();
        }
        function drawline() {
            var canvas = document.getElementById("myCanvas");
            var ctx_x = canvas.getContext("2d");
            ctx_x.moveTo(350, 0);
            ctx_x.lineTo(350, 400);
            ctx_x.stroke();
            ctx_x.moveTo(0, 200);
            ctx_x.lineTo(700, 200);
            ctx_x.stroke();
            r = 100;
            theta = thetaP;
            ctx_x.moveTo((sigma1 + sigma2) / 2, 200);
            ctx_x.lineTo((sigma1 + sigma2) / 2 + 100 * Math.cos(theta), 200 + r * Math.sin(theta));
            ctx_x.stroke();
            ctx_x.moveTo((sigma1 + sigma2) / 2, 200);
            ctx_x.lineTo((sigma1 + sigma2) / 2 - 100 * Math.cos(theta), 200 - r * Math.sin(theta));
            ctx_x.stroke();
        }
        function radians_to_degrees(radians) {
            var pi = Math.PI;
            return radians * (180 / pi);
        }


    </script>
  </body>
</html>
