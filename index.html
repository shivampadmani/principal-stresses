<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=windows-1252">
    <title> Principal Stresses </title>
    <link rel="stylesheet" href="styles.css">
</head>

<body class="fullbody">
    <h1 id="heading"> Welcome to Principal Stress Calculator </h1>
    <table id="mainbody">
        <tr>
            <td class="left">
                <img src="images/main_diagram.jpg" alt="Basic Diagram" style="width: 391px; height: 385px;">
                <form id="user_input">
                    <table>

                        <tr>
                            <td> &#963;<sub>x</sub> </td>
                            <td> <input class="textbox" id="stress-x" type="text"> </td>
                        </tr>
                        <tr>
                            <td> &#963;<sub>y</sub> </td>
                            <td> <input id="stress-y" class="textbox" type="text"> </td>
                        </tr>
                        <tr>
                            <td> &#932;<sub>xy</sub> </td>
                            <td> <input id="shear" class="textbox" type="text"> </td>
                        </tr>
                    </table>
                    &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                    <input id="calculate_now" value="Calculate" onclick="calculate()"     type="submit">
                </form>
            </td>
            <td class="right">
                <table>
                    <tr>
                        <!--for drawing circle-->
                        <canvas id="myCanvas" height="400px" width="750px"></canvas>
                    </tr>
                    <tr>
                        <!--for showing answer-->
                        <table id="answertable">
                            <tr>
                                <td>
                                    <p>
                                        Max. Principal Stress
                                    </p>
                                </td>
                                <td>
                                    <p id="pstress-1"></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>
                                        Min. Principal Stress
                                    </p>
                                </td>
                                <td>
                                    <p id="pstress-2"></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>
                                        Max. Shear Stress
                                    </p>
                                </td>
                                <td>
                                    <p id="shearMax"></p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <p>
                                        Angle of Principal planes
                                    </p>
                                </td>
                                <td>
                                    <p id="pthetap"></p>
                                </td>
                            </tr>   
                        </table>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <script>
    function calculate() {
           event.preventDefault();
            var x = document.getElementById("stress-x").value;
            var y = document.getElementById("stress-y").value;
            var z = document.getElementById("shear").value;
            var sigma1, sigma2, thetaP, thetaS, shearMax, mohrradius, v;
            //all fromulas here!!!
            mohrradius = Math.sqrt(((x - y) * (x - y) / 4) + z * z);
            v = (2 * z) / (x - y);
            sigma1 = ((x + y) / 2) + mohrradius;
            sigma2 = ((x + y) / 2) - mohrradius;
            thetaP = (Math.atan(v)) / 2;
            shearMax = (sigma1 - sigma2) / 2;
            document.getElementById("pstress-1").innerHTML =  sigma1 + " N/mm^2";
            document.getElementById("pstress-2").innerHTML =  sigma2 + " N/mm^2";
            document.getElementById("pshearmax").innerHTML =  shearMax + " N/mm^2";
            document.getElementById("pthetap").innerHTML = thetaP + " radians";
            /*document.getElementById("pstress-1").innerHTML = sigma1;
            document.getElementById("pstress-2").innerHTML = sigma2;*/
            drawcirc(mohrradius)
    }
    function drawcirc(radius){
            var c = document.getElementById("myCanvas");
            var ctx = c.getContext("2d");
            var radius = radius;
            ctx.beginPath();
            ctx.arc(200, 175, radius, 0, 2 * Math.PI);
            ctx.stroke();
    }
    </script>
</body>

</html>